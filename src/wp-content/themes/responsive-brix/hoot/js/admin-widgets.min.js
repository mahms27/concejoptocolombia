!function(t){"use strict";t.fn.hootWidgetIconPicker=function(){return this.each(function(){var o=t(this),i=o.siblings(".hoot-of-icon-picker-box"),e=o.siblings(".hoot-of-icon-picked"),n=e.children("i"),d=i.find("i");e.on("click",function(){i.toggle()}),d.on("click",function(){var e=t(this).data("value");d.removeClass("selected");var r=t(this).hasClass("cmb-icon-none")?"":"selected";t(this).addClass(r),n.removeClass().addClass("fa "+r+" "+e),o.val(e),o.trigger("change"),i.toggle()})})},t(document).on("click",function(o){t(o.target).closest(".hoot-of-icon-picker-box").length||t(o.target).closest(".hoot-of-icon-picked").length||t(".hoot-of-icon-picker-box").hide()}),t.fn.hootWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var o=t(this),i=o.siblings(".hoot-of-image"),e=o.children(".hoot-of-image-selected-img"),n=o.siblings(".hoot-of-image-remove");n.on("click",function(t){t.preventDefault(),i.val(""),i.trigger("change"),e.css("background-image","none")}),o.on("click",function(t){var n=o.data("frame");return n?(n.open(),!1):(n=wp.media({title:o.data("title"),library:{type:o.data("library").split(",").map(function(t){return t.trim()})},button:{text:o.data("update"),close:!1}}),o.data("frame",n),n.on("select",function(){var t=n.state().get("selection").first().attributes;i.val(t.id),i.trigger("change");var o="";o="undefined"!=typeof t.sizes?"undefined"!=typeof t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url:t.icon,e.css("background-image","url("+o+")"),n.close()}),n.open(),!1)})}})},t.fn.hootWidgetCollapser=function(){return this.each(function(){var o=t(this),i=o.siblings(".hoot-collapse-body");o.on("click",function(){i.toggle()})})},t.fn.hootSetupWidget=function(){var o=function(o,n,d){o.find(".hoot-widget-field-group-add").each(function(){var o=t(this),d=o.siblings(".hoot-widget-field-group-items"),r=o.parent(".hoot-widget-field-group").data("id"),s=window.hoot_widget_helper[n][r];o.on("click",function(){var n=parseInt(t(this).data("iterator"));n++,t(this).data("iterator",n);var r=s.trim().replace(/975318642/g,n),a=t(r);i(a),e(a),a.find(".hoot-of-icon").hootWidgetIconPicker(),a.find(".hoot-of-image-selected").hootWidgetImageUpload(),a.find(".hoot-of-color").wpColorPicker(),d.append(a),o.closest(".hoot-widget-form").find("input").filter(":first").trigger("change")})}),o.find(".hoot-widget-field-group-top").click(function(){t(this).toggleClass("open"),t(this).is(".open")?t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").show():t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").hide()})},i=function(o){o.find(".hoot-widget-field-group-item-top").on("click",function(){t(this).siblings(".hoot-widget-field-group-item-form").toggle()})},e=function(o){o.find(".hoot-widget-field-group-remove").on("click",function(){t(this).closest(".hoot-widget-form").find("input").filter(":first").trigger("change"),t(this).closest(".hoot-widget-field-group-item").remove()})};return this.each(function(n,d){var r=t(d),s=r.data("class");if(t("body").hasClass("widgets-php")){if(r.data("hoot-form-setup")===!0)return!0;if(!r.is(":visible"))return!0}r.find(".hoot-of-icon").hootWidgetIconPicker(),r.find(".hoot-of-image-selected").hootWidgetImageUpload(),r.find(".hoot-of-color").wpColorPicker(),r.find(".hoot-collapse-head").hootWidgetCollapser(),o(r,s,!1),i(r),e(r),r.find(".hoot-widget-field-widgetid .widgetid").each(function(){var o=r.closest(".widget").attr("id"),i=t(this).data("baseid");i&&o&&(o=o.substring(o.indexOf(i)),t(this).html(" #"+o))}),r.trigger("hootwidgetformsetup").data("hoot-form-setup",!0)})},t(".hoot-widget-form").hootSetupWidget(),t(".widgets-holder-wrap").on("click",".widget:has(.hoot-widget-form) .widget-top",function(){var o=t(this).closest(".widget").find(".hoot-widget-form");setTimeout(function(){o.hootSetupWidget()},200)})}(jQuery);